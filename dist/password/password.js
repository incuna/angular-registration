!function(a){"use strict";a.module("user_management.password",["ngRoute"])}(window.angular),function(a){"use strict";var b=a.module("user_management.password");b.provider("userManagementPasswordConfig",function(){var a="",b="/auth/password_reset/confirm",c="/auth/password_reset",d="/profile/password";return{$get:function(){return{apiRoot:function(){return a},changeEndpoint:function(){return b},resetRequestEndpoint:function(){return c},updateEndpoint:function(){return d}}},setApiRoot:function(b){a=b},setChangeEndpoint:function(a){b=a},setResetRequestEndpoint:function(a){c=a},setUpdateEndpoint:function(a){d=a}}})}(window.angular),function(a){"use strict";var b=a.module("user_management.password");b.config(["$routeProvider",function(a){a.when("/password-reset/",{templateUrl:"templates/user_management/password/reset_request.html",controller:"PasswordResetRequestCtrl"}).when("/password-change/:token*/",{templateUrl:"templates/user_management/password/change.html",controller:"PasswordChangeCtrl"})}])}(window.angular),function(a){"use strict";var b=a.module("user_management.password");b.factory("passwordFactory",["$http","userManagementPasswordConfig",function(a,b){var c=b.apiRoot(),d={url:c+b.resetRequestEndpoint(),options:function(){return a({method:"OPTIONS",url:d.url})},post:function(b){return a({method:"POST",url:d.url,data:b})}},e={url:c+b.changeEndpoint(),options:function(b){return a({method:"OPTIONS",url:e.url+"/"+b})},put:function(b,c){return a({method:"PUT",url:e.url+"/"+c,data:b})}},f={url:c+b.updateEndpoint(),options:function(){return a({method:"OPTIONS",url:f.url})},put:function(b){return a({method:"PUT",url:f.url,data:b})}};return{resetRequest:d,change:e,update:f}}])}(window.angular),function(a){"use strict";var b=a.module("user_management.password");b.controller("PasswordResetRequestCtrl",[function(){}]),b.controller("PasswordChangeCtrl",[function(){}])}(window.angular),function(a){"use strict";var b=a.module("user_management.password");b.directive("passwordResetRequestForm",["passwordFactory",function(b){return{restrict:"A",scope:!0,templateUrl:"templates/user_management/password/reset_request_form.html",link:function(c){c.data={};var d=b.resetRequest.options();d.then(function(a){c.fields=a.data.actions.POST}),c.resetRequest=function(){d.then(function(){c.loading=!0,c.email=null,a.forEach(c.fields,function(a){a.errors=""}),b.resetRequest.post(c.data).then(function(){c.email=c.data.email,c.data={}},function(b){a.forEach(b.data,function(a,b){c.fields[b].errors=a[0]})})["finally"](function(){c.loading=!1})})}}}}]),b.directive("passwordChangeForm",["$route","passwordFactory",function(b,c){return{restrict:"A",scope:!0,templateUrl:"templates/user_management/password/change_form.html",link:function(d){d.data={};var e,f=b.current.pathParams.token;e=a.isDefined(f)?c.change.options(f):c.update.options(),e.then(function(a){d.fields=a.data.actions.PUT},function(b){404===b.status&&a.isDefined(f)&&(d.tokenError=!0)}),d.changePassword=function(){e.then(function(){d.loading=!0,d.changed=!1,d.updated=!1,a.forEach(d.fields,function(a){a.errors=""});var b;b=a.isDefined(f)?c.change.put(d.data,f).then(function(){d.data={},d.changed=!0}):c.update.put(d.data).then(function(){d.data={},d.updated=!0}),b["catch"](function(b){a.forEach(b.data,function(a,b){d.fields[b].errors=a[0]})})["finally"](function(){d.loading=!1})})}}}}])}(window.angular);